{"ast":null,"code":"import _regeneratorRuntime from \"/home/maria/maria/app_todofv/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/maria/maria/app_todofv/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { defineStore } from 'pinia';\nimport supabase from '../supabase/index';\nexport default defineStore('user', {\n  state: function state() {\n    return {\n      user: null,\n      errorMsg: ''\n    };\n  },\n  actions: {\n    fetchUser: function fetchUser() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var user;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return supabase.auth.user();\n\n              case 2:\n                user = _context.sent;\n                _this.user = user;\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    signUp: function signUp(email, password) {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var _yield$supabase$auth$, user, error;\n\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return supabase.auth.signUp({\n                  email: email,\n                  password: password\n                });\n\n              case 2:\n                _yield$supabase$auth$ = _context2.sent;\n                user = _yield$supabase$auth$.user;\n                error = _yield$supabase$auth$.error;\n                if (error) _this2.errorMsg = error.message;\n\n                if (!error) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                throw error;\n\n              case 8:\n                if (user) _this2.user = user;\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    signIn: function signIn(email, password) {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var _yield$supabase$auth$2, user, error;\n\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return supabase.auth.signIn({\n                  email: email,\n                  password: password\n                });\n\n              case 2:\n                _yield$supabase$auth$2 = _context3.sent;\n                user = _yield$supabase$auth$2.user;\n                error = _yield$supabase$auth$2.error;\n                if (error) _this3.errorMsg = error.message;\n\n                if (!error) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                throw error;\n\n              case 8:\n                if (user) _this3.user = user;\n\n              case 9:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    signOut: function signOut() {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var _yield$supabase$auth$3, error;\n\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return supabase.auth.signOut();\n\n              case 2:\n                _yield$supabase$auth$3 = _context4.sent;\n                error = _yield$supabase$auth$3.error;\n\n                if (!error) {\n                  _context4.next = 8;\n                  break;\n                }\n\n                throw error;\n\n              case 8:\n                _this4.user = null;\n\n              case 9:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }))();\n    }\n  },\n  persist: {\n    enabled: true,\n    strategies: [{\n      key: 'user',\n      storage: localStorage\n    }]\n  }\n});","map":{"version":3,"names":["defineStore","supabase","state","user","errorMsg","actions","fetchUser","auth","signUp","email","password","error","message","signIn","signOut","persist","enabled","strategies","key","storage","localStorage"],"sources":["/home/maria/maria/app_todofv/src/store/user.js"],"sourcesContent":["import { defineStore } from 'pinia';\nimport supabase from '../supabase/index';\n\nexport default defineStore('user', {\n  state: () => ({\n    user: null,\n    errorMsg: '',\n  }),\n\n  actions: {\n    async fetchUser() {\n      const user = await supabase.auth.user();\n      this.user = user;\n    },\n\n    async signUp(email, password) {\n      const { user, error } = await supabase.auth.signUp({\n        email,\n        password,\n      });\n      if (error) this.errorMsg = error.message;\n      if (error) throw error;\n      if (user) this.user = user;\n    },\n\n    async signIn(email, password) {\n      const { user, error } = await supabase.auth.signIn({\n        email,\n        password,\n      });\n      if (error) this.errorMsg = error.message;\n      if (error) throw error;\n      if (user) this.user = user;\n    },\n\n    async signOut() {\n      const { error } = await supabase.auth.signOut();\n      if (error) throw error;\n      else this.user = null;\n    },\n  },\n  persist: {\n    enabled: true,\n    strategies: [\n      {\n        key: 'user',\n        storage: localStorage,\n      },\n    ],\n  },\n});\n"],"mappings":";;AAAA,SAASA,WAAT,QAA4B,OAA5B;AACA,OAAOC,QAAP,MAAqB,mBAArB;AAEA,eAAeD,WAAW,CAAC,MAAD,EAAS;EACjCE,KAAK,EAAE;IAAA,OAAO;MACZC,IAAI,EAAE,IADM;MAEZC,QAAQ,EAAE;IAFE,CAAP;EAAA,CAD0B;EAMjCC,OAAO,EAAE;IACDC,SADC,uBACW;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACGL,QAAQ,CAACM,IAAT,CAAcJ,IAAd,EADH;;cAAA;gBACVA,IADU;gBAEhB,KAAI,CAACA,IAAL,GAAYA,IAAZ;;cAFgB;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGjB,CAJM;IAMDK,MANC,kBAMMC,KANN,EAMaC,QANb,EAMuB;MAAA;;MAAA;QAAA;;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACET,QAAQ,CAACM,IAAT,CAAcC,MAAd,CAAqB;kBACjDC,KAAK,EAALA,KADiD;kBAEjDC,QAAQ,EAARA;gBAFiD,CAArB,CADF;;cAAA;gBAAA;gBACpBP,IADoB,yBACpBA,IADoB;gBACdQ,KADc,yBACdA,KADc;gBAK5B,IAAIA,KAAJ,EAAW,MAAI,CAACP,QAAL,GAAgBO,KAAK,CAACC,OAAtB;;gBALiB,KAMxBD,KANwB;kBAAA;kBAAA;gBAAA;;gBAAA,MAMXA,KANW;;cAAA;gBAO5B,IAAIR,IAAJ,EAAU,MAAI,CAACA,IAAL,GAAYA,IAAZ;;cAPkB;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAQ7B,CAdM;IAgBDU,MAhBC,kBAgBMJ,KAhBN,EAgBaC,QAhBb,EAgBuB;MAAA;;MAAA;QAAA;;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACET,QAAQ,CAACM,IAAT,CAAcM,MAAd,CAAqB;kBACjDJ,KAAK,EAALA,KADiD;kBAEjDC,QAAQ,EAARA;gBAFiD,CAArB,CADF;;cAAA;gBAAA;gBACpBP,IADoB,0BACpBA,IADoB;gBACdQ,KADc,0BACdA,KADc;gBAK5B,IAAIA,KAAJ,EAAW,MAAI,CAACP,QAAL,GAAgBO,KAAK,CAACC,OAAtB;;gBALiB,KAMxBD,KANwB;kBAAA;kBAAA;gBAAA;;gBAAA,MAMXA,KANW;;cAAA;gBAO5B,IAAIR,IAAJ,EAAU,MAAI,CAACA,IAAL,GAAYA,IAAZ;;cAPkB;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAQ7B,CAxBM;IA0BDW,OA1BC,qBA0BS;MAAA;;MAAA;QAAA;;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACUb,QAAQ,CAACM,IAAT,CAAcO,OAAd,EADV;;cAAA;gBAAA;gBACNH,KADM,0BACNA,KADM;;gBAAA,KAEVA,KAFU;kBAAA;kBAAA;gBAAA;;gBAAA,MAEGA,KAFH;;cAAA;gBAGT,MAAI,CAACR,IAAL,GAAY,IAAZ;;cAHS;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAIf;EA9BM,CANwB;EAsCjCY,OAAO,EAAE;IACPC,OAAO,EAAE,IADF;IAEPC,UAAU,EAAE,CACV;MACEC,GAAG,EAAE,MADP;MAEEC,OAAO,EAAEC;IAFX,CADU;EAFL;AAtCwB,CAAT,CAA1B"},"metadata":{},"sourceType":"module"}