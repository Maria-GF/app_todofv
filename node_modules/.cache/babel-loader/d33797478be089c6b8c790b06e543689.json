{"ast":null,"code":"import _regeneratorRuntime from \"/home/maria/maria/app_todofv/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/maria/maria/app_todofv/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"/home/maria/maria/app_todofv/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport { mapState, mapActions } from 'pinia';\nimport userStore from '@/store/user';\nexport default {\n  name: 'SignUp',\n  data: function data() {\n    return {\n      newUserPassword: '',\n      newUserEmail: '',\n      confirmPassword: '',\n      message: ''\n    };\n  },\n  computed: _objectSpread({}, mapState(userStore, ['user', 'errorMsg'])),\n  created: function created() {\n    this.fetchUser();\n  },\n  methods: _objectSpread(_objectSpread({}, mapActions(userStore, ['signUp', 'fetchUser'])), {}, {\n    validateEmail: function validateEmail(value) {\n      if (/^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/.test(value)) {\n        this.message = 'Please,create a password!';\n      } else {\n        this.message = 'Please, enter a valid email!';\n      }\n    },\n    validatePassword: function validatePassword(value) {\n      var difference = 6 - value.length;\n\n      if (value.length < 6) {\n        this.message = \"The password must have at least 6 characters! + \".concat(difference, \" + characters left\");\n      } else {\n        this.message = '';\n      }\n    },\n    handleSignUp: function handleSignUp() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (_this.newUserEmail) {\n                  _context.next = 4;\n                  break;\n                }\n\n                _this.message = 'Email required';\n                _context.next = 16;\n                break;\n\n              case 4:\n                if (!(_this.confirmPassword === _this.newUserPassword)) {\n                  _context.next = 15;\n                  break;\n                }\n\n                _context.prev = 5;\n                _context.next = 8;\n                return _this.signUp(_this.newUserEmail, _this.newUserPassword);\n\n              case 8:\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](5);\n                _this.message = 'User already registered. Please, sign in!';\n\n              case 13:\n                _context.next = 16;\n                break;\n\n              case 15:\n                _this.message = 'Oops!Try again!The passwords do not match!';\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[5, 10]]);\n      }))();\n    }\n  }),\n  watch: {\n    user: function user() {\n      if (this.user) {\n        this.$router.push({\n          path: '/'\n        });\n      }\n    },\n    newUserEmail: function newUserEmail(value) {\n      // binding this to the data value in the email input\n      this.newUserEmail = value;\n      this.validateEmail(value);\n    },\n    newUserPassword: function newUserPassword(value) {\n      this.newUserPassword = value;\n      this.validatePassword(value);\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;AAmFA,SAASA,QAAT,EAAmBC,UAAnB,QAAqC,OAArC;AACA,OAAOC,SAAP,MAAsB,cAAtB;AAEA,eAAe;EACbC,IAAI,EAAE,QADO;EAEbC,IAFa,kBAEN;IACL,OAAO;MACLC,eAAe,EAAE,EADZ;MAELC,YAAY,EAAE,EAFT;MAGLC,eAAe,EAAE,EAHZ;MAILC,OAAO,EAAE;IAJJ,CAAP;EAMD,CATY;EAUbC,QAAQ,oBACHT,QAAQ,CAACE,SAAD,EAAY,CAAC,MAAD,EAAS,UAAT,CAAZ,CADL,CAVK;EAabQ,OAba,qBAaH;IACR,KAAKC,SAAL;EACD,CAfY;EAgBbC,OAAO,kCACFX,UAAU,CAACC,SAAD,EAAY,CAAC,QAAD,EAAW,WAAX,CAAZ,CADR;IAELW,aAFK,yBAESC,KAFT,EAEgB;MACnB,IAAI,8CAA8CC,IAA9C,CAAmDD,KAAnD,CAAJ,EAA+D;QAC7D,KAAKN,OAAL,GAAe,2BAAf;MACF,CAFA,MAEO;QACL,KAAKA,OAAL,GAAe,8BAAf;MACF;IACD,CARI;IASLQ,gBATK,4BASYF,KATZ,EASmB;MACtB,IAAMG,UAAS,GAAI,IAAIH,KAAK,CAACI,MAA7B;;MACA,IAAIJ,KAAK,CAACI,MAAN,GAAe,CAAnB,EAAsB;QACpB,KAAKV,OAAL,6DAAkES,UAAlE;MACF,CAFA,MAEO;QACL,KAAKT,OAAL,GAAe,EAAf;MACF;IACD,CAhBI;IAiBCW,YAjBD,0BAiBgB;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACd,KAAI,CAACb,YADS;kBAAA;kBAAA;gBAAA;;gBAEjB,KAAI,CAACE,OAAL,GAAe,gBAAf;gBAFiB;gBAAA;;cAAA;gBAAA,MAGR,KAAI,CAACD,eAAL,KAAyB,KAAI,CAACF,eAHtB;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA;gBAAA,OAKT,KAAI,CAACe,MAAL,CAAY,KAAI,CAACd,YAAjB,EAA+B,KAAI,CAACD,eAApC,CALS;;cAAA;gBAAA;gBAAA;;cAAA;gBAAA;gBAAA;gBAOf,KAAI,CAACG,OAAL,GAAe,2CAAf;;cAPe;gBAAA;gBAAA;;cAAA;gBAUjB,KAAI,CAACA,OAAL,GAAe,4CAAf;;cAViB;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAYpB;EA7BI,EAhBM;EA+Cba,KAAK,EAAE;IACLC,IADK,kBACE;MACL,IAAI,KAAKA,IAAT,EAAe;QACb,KAAKC,OAAL,CAAaC,IAAb,CAAkB;UAAEC,IAAI,EAAE;QAAR,CAAlB;MACF;IACD,CALI;IAMLnB,YANK,wBAMQQ,KANR,EAMe;MAClB;MACA,KAAKR,YAAL,GAAoBQ,KAApB;MACA,KAAKD,aAAL,CAAmBC,KAAnB;IACD,CAVI;IAWLT,eAXK,2BAWWS,KAXX,EAWkB;MACrB,KAAKT,eAAL,GAAuBS,KAAvB;MACA,KAAKE,gBAAL,CAAsBF,KAAtB;IACD;EAdI;AA/CM,CAAf","names":["mapState","mapActions","userStore","name","data","newUserPassword","newUserEmail","confirmPassword","message","computed","created","fetchUser","methods","validateEmail","value","test","validatePassword","difference","length","handleSignUp","signUp","watch","user","$router","push","path"],"sourceRoot":"","sources":["/home/maria/maria/app_todofv/src/components/SignUp.vue"],"sourcesContent":["<template>\n  <section class='vh-100'>\n    <div class='container py-5 h-100'>\n      <div class='row d-flex justify-content-center align-items-center h-100'>\n        <div class='col col-xl-10'>\n          <div class='cardauth' style='border-radius: 1rem'>\n            <div class='row g-0'>\n              <div class='col-md-6 col-lg-5 d-none d-md-block authimg2'></div>\n              <div class='col-md-6 col-lg-7 d-flex align-items-center'>\n                <div class='card-body p-4 p-lg-5 text-black'>\n                  <form>\n                    <div class='d-flex align-items-center mb-3 pb-1'>\n                      <span class='h1 fw-bold mb-0' style=\"margin:auto\"\n                        >Create a new account</span\n                      >\n                    </div>\n                    <div class='form-outline mb-4'>\n                      <label class='form-label' for='new-email'\n                        >Email address\n                        <input\n                          type='email'\n                          id='new-email'\n                          class='form-control form-control-lg'\n                          v-model='newUserEmail'\n                          placeholder='email@email.com'\n                          required\n                        />\n                      </label>\n                    </div>\n\n                    <div class='form-outline mb-4'>\n                      <label class='form-label' for='new-password'\n                        >Create password\n                        <input\n                          type='password'\n                          id='new-password'\n                          class='form-control form-control-lg'\n                          v-model='newUserPassword'\n                          placeholder='New Password'\n                          required\n                        />\n                      </label>\n                    </div>\n\n                    <div class='form-outline mb-4'>\n                      <label class='form-label' for='confirm-password'\n                        >Confirm password\n                        <input\n                          type='password'\n                          id='confirm-password'\n                          class='form-control form-control-lg'\n                          v-model='confirmPassword'\n                          placeholder='Confirm Password'\n                        />\n                      </label>\n                    </div>\n                    <div class='msg'>{{ message }}</div>\n\n                    <div class='pt-1 mb-4'>\n                      <button\n                        @click.prevent='handleSignUp'\n                        class='btn btn-dark btn-lg btn-block'\n                        type='button'\n                      >\n                        Sign up\n                      </button>\n                    </div>\n                  </form>\n                  <button class='btn btn-light btn-sm signout'>\n                    <router-link class='link-secondary' to='/auth'\n                      >Go Back</router-link\n                    >\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n<script>\nimport { mapState, mapActions } from 'pinia';\nimport userStore from '@/store/user';\n\nexport default {\n  name: 'SignUp',\n  data() {\n    return {\n      newUserPassword: '',\n      newUserEmail: '',\n      confirmPassword: '',\n      message: '',\n    };\n  },\n  computed: {\n    ...mapState(userStore, ['user', 'errorMsg']),\n  },\n  created() {\n    this.fetchUser();\n  },\n  methods: {\n    ...mapActions(userStore, ['signUp', 'fetchUser']),\n    validateEmail(value) {\n      if (/^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/.test(value)) {\n        this.message = 'Please,create a password!';\n      } else {\n        this.message = 'Please, enter a valid email!';\n      }\n    },\n    validatePassword(value) {\n      const difference = 6 - value.length;\n      if (value.length < 6) {\n        this.message = `The password must have at least 6 characters! + ${difference} + characters left`;\n      } else {\n        this.message = '';\n      }\n    },\n    async handleSignUp() {\n      if (!this.newUserEmail) {\n        this.message = 'Email required';\n      } else if (this.confirmPassword === this.newUserPassword) {\n        try {\n          await this.signUp(this.newUserEmail, this.newUserPassword);\n        } catch (error) {\n          this.message = 'User already registered. Please, sign in!';\n        }\n      } else {\n        this.message = 'Oops!Try again!The passwords do not match!';\n      }\n    },\n  },\n  watch: {\n    user() {\n      if (this.user) {\n        this.$router.push({ path: '/' });\n      }\n    },\n    newUserEmail(value) {\n      // binding this to the data value in the email input\n      this.newUserEmail = value;\n      this.validateEmail(value);\n    },\n    newUserPassword(value) {\n      this.newUserPassword = value;\n      this.validatePassword(value);\n    },\n  },\n};\n</script>\n<style>\n.authimg2 {\n  background-image: url('../assets/passw.jpg');\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n  border-radius: 1rem 0 0 1rem;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}